name: "Example Project"
columns: auto
logs: true
logsDir: ~/.dpr/logs

services:
  - id: api
    name: "API Server"
    start: "echo 'Starting API...' && sleep 1 && echo 'API ready!' && while true; do echo 'API heartbeat'; sleep 5; done"
    autostart: true
    color: green
    readyPattern: "API ready!"
    scripts:
      - id: health
        name: "Health Check"
        command: "echo 'Checking API health...' && sleep 0.5 && echo 'API is healthy!'"
        key: c
      - id: reset
        name: "Reset API State"
        command: "echo 'Resetting API state...' && sleep 1 && echo 'API state reset complete'"
        key: r

  - id: web
    name: "Web Server"
    start: "echo 'Starting Web...' && sleep 1 && echo 'Web ready!' && while true; do echo 'Web heartbeat'; sleep 5; done"
    autostart: true
    color: blue
    readyPattern: "Web ready!"
    dependsOn:
      - api

  - id: worker
    name: "Background Worker"
    start: "echo 'Starting Worker...' && sleep 1 && echo 'Worker ready!' && while true; do echo 'Worker processing...'; sleep 3; done"
    autostart: false
    color: yellow
    readyPattern: "Worker ready!"
    scripts:
      - id: process-job
        name: "Process Single Job"
        command: "echo 'Processing job {jobId}...' && sleep 1 && echo 'Job {jobId} complete!'"
        key: p
        params:
          - id: jobId
            prompt: "Enter job ID"
      - id: clear-queue
        name: "Clear Job Queue"
        command: "echo 'Clearing job queue...' && sleep 0.5 && echo 'Queue cleared'"
